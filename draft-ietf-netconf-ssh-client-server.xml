<?xml version='1.0'?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">

<?rfc toc="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<?rfc linkmailto="no" ?>
<?rfc editing="no" ?>
<?rfc comments="yes" ?>
<?rfc inline="yes"?>
<?rfc rfcedstyle="yes"?>
<?rfc-ext allow-markup-in-artwork="yes" ?>
<?rfc-ext include-index="no" ?>
<!--<?rfc strict="no"?> -->

<rfc category="std"
     ipr="trust200902"
     docName="draft-ietf-netconf-ssh-client-server-latest" >
    <front>
        <title>SSH Client and Server Models</title>
        <author initials="K.W." surname="Watsen" fullname="Kent Watsen">
            <organization>Juniper Networks</organization>
            <address>
                <email>kwatsen@juniper.net</email>
            </address>
        </author>
        <author initials="G.W." surname="Wu" fullname="Gary Wu">
            <organization>Cisco Systems</organization>
            <address>
                <email>garywu@cisco.com</email>
            </address>
        </author>
        <date/>
        <area>Operations</area>
        <workgroup>NETCONF Working Group</workgroup>
        <abstract>
            <t>This document defines three YANG modules: the first defines
            groupings for a generic SSH client, the second defines groupings
            for a generic SSH server, and the third defines common identities
            and groupings used by both the client and the server.  It is
            intended that these groupings will be used by applications using
            the SSH protocol.</t>
        </abstract>
        <note title="Editorial Note (To be removed by RFC Editor)">
          <t>This draft contains many placeholder values that need to be replaced
          with finalized values at the time of publication.  This note summarizes
          all of the substitutions that are needed.  No other RFC Editor
          instructions are specified elsewhere in this document.</t>

          <t>This document contains references to other drafts in progress, both in
          the Normative References section, as well as in body text throughout.  
          Please update the following references to reflect their final RFC assignments:
            <list style="symbols">
              <t>draft-ietf-netconf-keystore</t>
            </list>
          </t>
          <t>Artwork in this document contains shorthand references to drafts in 
          progress.  Please apply the following replacements:
            <list  style="symbols">
              <t><spanx style="verb">XXXX</spanx> --&gt; the assigned RFC value for this draft</t>
              <t><spanx style="verb">YYYY</spanx> --&gt; the assigned RFC value for draft-ietf-netconf-keystore</t>
            </list>
          </t>
          <t>Artwork in this document contains placeholder values for the date of 
          publication of this draft.  Please apply the following replacement:
            <list  style="symbols">
              <t><spanx style="verb">YYYY-MM-DD</spanx> --&gt; the publication date of this draft</t>
            </list>
          </t>
          <t>The following two Appendix sections are to be removed prior to publication:
            <list  style="symbols">
              <t>Appendix A.  Change Log</t>
              <t>Appendix B.  Open Issues</t>
            </list>
          </t>
        </note>
    </front>
    <middle>

        <section title="Introduction">

            <t>This document defines three YANG <xref target="RFC7950"/>
            modules: the first defines a grouping for a generic SSH client, the
            second defines a grouping for a generic SSH server, and the third
            defines identities and groupings common to both the client and the
            server (SSH is defined in <xref target="RFC4252"/>, <xref
            target="RFC4253"/>, and <xref target="RFC4254"/>).  It is intended
            that these groupings will be used by applications using the SSH
            protocol.  For instance, these groupings could be used to help
            define the data model for an OpenSSH <xref target="OPENSSH"/>
            server or a NETCONF over SSH <xref target="RFC6242"/> based
            server.</t>

            <t>The client and server YANG modules in this document each define one grouping,
            which is focused on just SSH-specific configuration, and specifically
            avoids any transport-level configuration, such as what ports to
            listen-on or connect-to.  This enables applications the opportunity
            to define their own strategy for how the underlying TCP connection
            is established.  For instance, applications supporting NETCONF Call Home 
            <xref target="RFC8071"/> could use the grouping for the SSH parts it
            provides, while adding data nodes for the TCP-level call-home
            configuration.</t>

            <section title="Terminology">
              <t>The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL",
              "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
              and "OPTIONAL" in this document are to be interpreted as
              described in RFC 2119 <xref target="RFC2119"/>.</t>
            </section>

            <section title="Tree Diagrams" anchor="tree-diagrams">
            <t>A simplified graphical representation of the data models
            is used in this document.  The meaning of the symbols in
            these diagrams is as follows:
              <list style="symbols">
                <t>Brackets "[" and "]" enclose list keys.</t>
                <t>Braces "{" and "}" enclose feature names, and indicate
                that the named feature must be present for the subtree
                to be present.</t>
                <t>Abbreviations before data node names: "rw" means
                configuration (read-write) and "ro" state data 
                (read-only).</t>
                <t>Symbols after data node names: "?" means an optional
                node, "!" means a presence container, and "*" denotes a
                list and leaf-list.</t>
                <t>Parentheses enclose choice and case nodes, and case
                nodes are also marked with a colon (":").</t>
                <t>Ellipsis ("...") stands for contents of subtrees that
                are not shown.</t>
              </list>
            </t>
            </section>
        </section>

      <section title="The SSH Client Model" anchor="ssh-client-model">

        <t>The SSH client model presented in this section contains one
        YANG grouping, to just configure the SSH client omiting, for
        instance, any configuration for which IP address or port the
        client should connect to.</t>

        <t>This grouping references data nodes defined by the
        Keystore model <xref target="draft-ietf-netconf-keystore"/>.  For
        instance, a reference to the keystore model is made to indicate
        which trusted CA certificate a client should use to authenticate
        X.509v3 certificate based host keys <xref target="RFC6187"/>.</t>

        <section title="Tree Diagram">
          <t>The following tree diagram presents the data model for
          the grouping defined in the ietf-ssh-client module.  Please
          see <xref target="tree-diagrams"/> for tree diagram notation.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ietf-ssh-client-tree.txt)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="Example Usage">
          <t>This section shows how it would appear if the 
          ssh-client-grouping were populated with some data.
          This example is consistent with the examples presented in
          Section 2.2 of <xref target="draft-ietf-netconf-keystore"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ex-ssh-client.xml)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="YANG Model" anchor="ssh-client-yang-module">
          <t>This YANG module has a normative references to <xref target="RFC6991"/>
          and <xref target="draft-ietf-netconf-keystore"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[

<CODE BEGINS> file "ietf-ssh-client@YYYY-MM-DD.yang"

INSERT_TEXT_FROM_FILE(ietf-ssh-client@YYYY-MM-DD.yang)

<CODE ENDS>
]]></artwork>
            </figure>
          </t>
        </section>
      </section>


      <section title="The SSH Server Model" anchor="ssh-server-model">

        <t>The SSH server model presented in this section contains one
        YANG grouping, for just the SSH-level configuration omitting,
        for instance, configuration for which ports to open to listen
        for connections on.</t>

        <t>This grouping references data nodes defined by the
        Keystore model <xref target="draft-ietf-netconf-keystore"/>.
        For instance, a reference to the keystore model is made to indicate
        which host key a server should present.</t>

        <section title="Tree Diagram">
          <t>The following tree diagram presents the data model for
          the grouping defined in the ietf-ssh-server module. Please
          see <xref target="tree-diagrams"/> for tree diagram notation.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ietf-ssh-server-tree.txt)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="Example Usage">
          <t>This section shows how it would appear if the 
          ssh-server-grouping were populated with some data.
          This example is consistent with the examples presented in
          Section 2.2 of <xref target="draft-ietf-netconf-keystore"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ex-ssh-server.xml)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="YANG Model" anchor="ssh-server-yang-module">
          <t>This YANG module has a normative references to <xref target="RFC4253"/>,
          <xref target="RFC6991"/>, and <xref target="draft-ietf-netconf-keystore"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[

<CODE BEGINS> file "ietf-ssh-server@YYYY-MM-DD.yang"

INSERT_TEXT_FROM_FILE(ietf-ssh-server@YYYY-MM-DD.yang)

<CODE ENDS>
]]></artwork>
            </figure>
          </t>
        </section>
      </section>

      <section title="The SSH Common Model" anchor="ssh-common-model">

        <t>The SSH common model presented in this section contains identities
        and groupings common to both SSH clients and SSH servers.  The
        transport-params-grouping can be used to configure the list of SSH
        transport algorithms permitted by the SSH client or SSH server.  The
        lists of algorithms are ordered such that, if multiple algorithms are
        permitted by the client, the algorithm that appears first in its list
        that is also permitted by the server is used for the SSH transport
        layer connection.  The ability to restrict the the algorithms allowed
        is provided in this grouping for SSH clients and SSH servers that are
        capable of doing so and may serve to make SSH clients and SSH servers
        compliant with security policies.</t>

        <t>Features are defined for algorithms that are OPTIONAL or are not
        widely supported by popular implementations.  Note that the list of
        algorithms is not exhaustive.  As well, some algorithms that are
        REQUIRED by <xref target="RFC4253"/> are missing, notably "ssh-dss" and
        "diffie-hellman-group1-sha1" due to their falling out of favor with
        security experts and there being alternatives that are widely
        supported.</t>

        <section title="Tree Diagram">
          <t>The following tree diagram presents the data model for
          the grouping defined in the ietf-ssh-common module.  Please
          see <xref target="tree-diagrams"/> for tree diagram notation.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ietf-ssh-common-tree.txt)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="Example Usage">
          <t>This section shows how it would appear if the
          transport-params-grouping were populated with some data.</t>
          <t>
            <figure>
              <artwork><![CDATA[
INSERT_TEXT_FROM_FILE(refs/ex-ssh-common.xml)
]]></artwork>
            </figure>
          </t>
        </section>

        <section title="YANG Model" anchor="ssh-common-yang-module">
          <t>This YANG module has a normative references to <xref target="RFC4344"/>,
          <xref target="RFC4419"/>, and <xref target="RFC5656"/>.</t>
          <t>
            <figure>
              <artwork><![CDATA[

<CODE BEGINS> file "ietf-ssh-common@YYYY-MM-DD.yang"

INSERT_TEXT_FROM_FILE(ietf-ssh-common@YYYY-MM-DD.yang)

<CODE ENDS>
]]></artwork>
            </figure>
          </t>
        </section>
      </section>


      <section title="Security Considerations">
        <t>FIXME</t>
      </section>

      <section title="IANA Considerations">
        <section title="The IETF XML Registry">
          <t>This document registers two URIs in the IETF XML 
          registry <xref target="RFC3688"/>.  Following the format in 
          <xref target="RFC3688"/>, the following registrations are
          requested:</t>
          <t>
            <figure>
                <artwork><![CDATA[
   URI: urn:ietf:params:xml:ns:yang:ietf-ssh-client
   Registrant Contact: The NETCONF WG of the IETF.
   XML: N/A, the requested URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-ssh-server
   Registrant Contact: The NETCONF WG of the IETF.
   XML: N/A, the requested URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-ssh-common
   Registrant Contact: The NETCONF WG of the IETF.
   XML: N/A, the requested URI is an XML namespace.
]]></artwork>
            </figure>
          </t>
        </section>
        <section title="The YANG Module Names Registry">
          <t>This document registers two YANG modules in the
          YANG Module Names registry <xref target="RFC7950"/>.
          Following the format in <xref target="RFC7950"/>, the
          the following registrations are requested:</t>
          <t>
            <figure>
                <artwork><![CDATA[
   name:         ietf-ssh-client
   namespace:    urn:ietf:params:xml:ns:yang:ietf-ssh-client
   prefix:       sshc
   reference:    RFC XXXX

   name:         ietf-ssh-server
   namespace:    urn:ietf:params:xml:ns:yang:ietf-ssh-server
   prefix:       sshs
   reference:    RFC XXXX

   name:         ietf-ssh-common
   namespace:    urn:ietf:params:xml:ns:yang:ietf-ssh-common
   prefix:       sshcom
   reference:    RFC XXXX
]]></artwork>
            </figure>
          </t>
        </section>
      </section>

      <section title="Acknowledgements">
        <t>The authors would like to thank for following for
        lively discussions on list and in the halls (ordered
        by last name): Andy Bierman, Martin Bjorklund, Benoit Claise,
        Mehmet Ersue, David Lamparter, Alan Luchuk, Ladislav Lhotka,
        Radek Krejci, Tom Petch, Juergen Schoenwaelder, Phil Shafer, 
        Sean Turner, Michal Vaško, and Bert Wijnen.</t>
     </section>

    </middle>

    <back>
      <references title="Normative References">
        <?rfc include="reference.RFC.2119.xml"?>
        <?rfc include="reference.RFC.6187.xml"?>
        <?rfc include="reference.RFC.6991.xml"?>
        <?rfc include="reference.RFC.7950.xml"?>

        <reference anchor='draft-ietf-netconf-keystore' target="https://datatracker.ietf.org/html/draft-ieft-netconf-keystore">
          <front>
            <title>Keystore Model</title>
            <author initials='K.W.' surname='Watsen' fullname='Kent Watsen'>
              <organization>Juniper Networks</organization>
            </author>
            <date year='2016' />
          </front>
          <seriesInfo name='Internet-Draft' value='draft-ieft-netconf-keystore-00'/>
        </reference>

      </references>

      <references title="Informative References">

        <!--<reference anchor='FIPS180-4' target="http://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf">
          <front>
            <title>Secure Hash Standard (SHS)</title>
            <author fullname='National Institute of Standards and Technology'/>
            <date year='2012' month='March'/>
          </front>
          <seriesInfo name="FIPS PUB" value="180-4"/>
        </reference>-->

        <?rfc include="reference.RFC.3688.xml"?>
        <?rfc include="reference.RFC.4252.xml"?>
        <?rfc include="reference.RFC.4253.xml"?>
        <?rfc include="reference.RFC.4254.xml"?>
        <?rfc include="reference.RFC.4344.xml"?>
        <?rfc include="reference.RFC.4419.xml"?>
        <?rfc include="reference.RFC.5656.xml"?>
        <?rfc include="reference.RFC.6668.xml"?>
        <?rfc include="reference.RFC.6242.xml"?>
        <?rfc include="reference.RFC.8071.xml"?>

        <reference anchor='OPENSSH' target="http://www.openssh.com">
          <front>
            <title>OpenSSH</title>
            <author fullname='The OpenBSD Project'/>
            <date year='2016'/>
          </front>
        </reference>

      </references>

      <section title="Change Log">
        <section title="server-model-09 to 00">
          <t>
            <list style="symbols">
              <t>This draft was split out from draft-ietf-netconf-server-model-09.</t>
              <t>Added in previously missing ietf-ssh-client module.</t>
              <t>Noted that '0.0.0.0' and '::' might have special meanings.</t>
            </list>
          </t>
        </section>
        <section title="00 to 01">
          <t>
            <list style="symbols">
              <t>Renamed "keychain" to "keystore".</t>
            </list>
          </t>
        </section>
        <section title="00 to 02">
          <t>
            <list style="symbols">
              <t>Removed the groupings 'listening-ssh-client-grouping' and
              'listening-ssh-server-grouping'.  Now modules only contain the
              transport-independent groupings.</t>
              <t>Simplified the "client-auth" part in the ietf-ssh-client
              module.  It now inlines what it used to point to keystore for..</t>
            </list>
          </t>
        </section>
      </section>

      <section title="Open Issues">
        <t>Please see: https://github.com/netconf-wg/ssh-client-server/issues.</t>
      </section>
    </back>
</rfc>

